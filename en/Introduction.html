<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1. What is Singularity? &#8212; Singularity on FUGAKU  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Procedure for using Singularity" href="GettingStarted.html" />
    <link rel="prev" title="How to use SingularityPRO in FUGAKU" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="singularity">
<h1><span class="section-number">1. </span>What is Singularity?<a class="headerlink" href="#singularity" title="Link to this heading">¶</a></h1>
<p>Singularity is an open source Linux container implementation developed in 2015 to enhance the convenience of supercomputers at the Lawrence Berkeley national Laboratory in the united states.</p>
<p>現在 Singularity は、開発者らが立ち上げた Sylabs 社と、独立したコミュニティにより個別に開発されています。後者の無償のものは Community Edition(CE)と呼ばれ、修正 BSD License（一部 Apache License のコードを含む）で Github 上に公開されています。これに対し、CE をベースに十分に検証された機能を搭載し、セキュリティ対応やバグフィックスのバックポート等の有償サービスを、主要な開発を行っている Sylabs 社が提供する Singularity PRO があります。「富岳」ではセキュリティおよびサポートの観点から、Singularity PRO を採用しています。</p>
<p>With Singularity, of the system configuration required to execute an application, the parts other than the kernel can be independently configured and maintained, and can be integrated with the application, so if the environment has the same architecture, the entire execution environment can be carried.</p>
<p>また、アプリケーションに必要なランタイムライブラリの更新頻度が高い場合や、多彩なアプリケーションを駆使する必要がある場合に、それぞれの要件を個別に整えたり切り替えたりすることを考えなくてよくなります。さらに古い実行環境を保存しておくことも容易なため、データの再検証などもやりやすくなります。</p>
<p>他の実装と比べた Singularity の際立った特徴は以下の4点です。</p>
<ol class="arabic simple">
<li><p>Since the image is created in a single file, managing container images is intuitive and easy.</p></li>
<li><p>イメージを展開せず、単一ファイルのまま利用できるので、アプリケーション稼働時の共有ファイルシステムへの I/O を抑制できる。</p></li>
<li><p>The ID and privileges of the started user are inherited inside the container. As a results, files, Hardware, and processes can be accessed as the same user.</p></li>
<li><p>Secure operation is possible because no root authority or daemon is involved when creating an image or executing a container.</p></li>
</ol>
<section id="id1">
<h2><span class="section-number">1.1. </span>Container<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>Containers are one of the virtualization technologies. Whereas full virtualization installs and runs the entire OS on a hardware emulator, containers share a host-side kernel and only switch between user environments. Therefore, there are following benefits.</p>
<ol class="arabic simple">
<li><p>Since it runs on a booted kernel, there is no need to boot the entire OS as in full virtualization, booting is fast and there is little overhead.</p></li>
<li><p>Since the system, application, and user settings can be used together, it achieves high reproducibility and easy care for inter-generational verification.</p></li>
<li><p>There is no need to set up the environment multiple times on multiple systems or to verify the operation.</p></li>
</ol>
<p></p>
<p>In addition to Singularity, there are many container implementations such as Podman, Docker, LXE, Shifter, CharieCloud, etc., each of which has its own characteristics. What they have in common is to switch under the root directory and run the application on a dedicated environment. The cut out of the user land (in short, below the root directory) is called an image, and the format and usage method differs depending on the container implementation.</p>
<p>コンテナの中身は既存の OS の環境と変わりません。そのため、異なるアーキテクチャのアプリケーションを持ち込むことはできません。ARM で作成されたイメージを x86_64 の環境で動かしたり、その逆はできません。また、カーネルはホスト側の物を利用するため、カーネルのバージョンに強く依存したり、追加でドライバーの導入を求められるようなアプリケーションの稼働はできない可能性があります。</p>
</section>
<section id="id2">
<h2><span class="section-number">1.2. </span>Image<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>To create an image of a container, deploy an OS environment separate from the host side in an empty file system, and build the required runtime and application environment. The resulting file system can be saved individually as a file or retrieved from a repository on the network.</p>
<p>Singularity のイメージは SIF（Singularity Image Format）と呼ばれる形式の単一ファイルで構成されます。そのため、ユーザーはアプリケーションがランタイムごとインストールされたイメージを1ファイルで持つことができ、保存や転送などのハンドリングが直感的で容易です。</p>
<p>On the other hand, Singularity does not require that the image be created in SIF format. You can also run container images saved in other formats directly.</p>
</section>
<section id="id3">
<h2><span class="section-number">1.3. </span>Execution<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>Basically, launching a container means expanding and mounting an image and preparing the application execution environment, and it has a different meaning from launching an application in it. However, Singularity integrates the launch of the container and the launch of the application, so you can run it as if you were dealing with a statically linked binary, without being aware that you are using the container.</p>
<p>There are some following ways to run your application inside a container with Singularity:</p>
<ol class="arabic simple">
<li><p>Start the shell when the container starts and operate it manually.</p></li>
<li><p>Execute any command in the image at the same time as starting the container.</p></li>
<li><p>Make sure that the preset commands for the image are executed as soon as the container is started.</p></li>
<li><p>Start only the container and issue a command to the specified container from the outside.</p></li>
</ol>
<p>「富岳」をはじめとしたバッチ処理環境では、検証などを除けば２番目と３番目での実行方法をとることになるのでしょう。４番目は多数のデータの処理に同じ環境を何度も繰り返し使う場合や、 Jupyter Notebook 等のサービスを立ち上げて外部からそれにアクセスするような使い方となります。</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Singularity on FUGAKU</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. What is Singularity?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">1.1. Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">1.2. Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">1.3. Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">2. Procedure for using Singularity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating.html">3. Creating an image</a></li>
<li class="toctree-l1"><a class="reference internal" href="Execution.html">4. Runtime options and behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="Submitting.html">5. Cooperation with job scheduler</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">How to use SingularityPRO in FUGAKU</a></li>
      <li>Next: <a href="GettingStarted.html" title="next chapter"><span class="section-number">2. </span>Procedure for using Singularity</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021-, RIKEN R-CCS.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/">Fugaku Potal Top</a>
    </div>
  </body>
</html>